<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>12-Week Trainer</title>
    <style>
        :root {
            /* Modern Dark Palette */
            --bg-body: #121212;
            --bg-card: #1e1e1e;
            --bg-modal: #252525;
            --primary: #e53935; /* Modern Red */
            --primary-dim: #b71c1c;
            --accent: #ffd700; /* Gold for Cardio/Tips */
            --text-main: #ececec;
            --text-muted: #a0a0a0;
            --success: #00e676;
            --border: #333333;
            --shadow: 0 8px 16px rgba(0,0,0,0.4);
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            font-size: 14px;
            line-height: 1.5;
        }

        /* --- Header & Nav --- */
        header {
            background: linear-gradient(180deg, #1a1a1a 0%, #121212 100%);
            padding: 40px 20px;
            text-align: center;
            border-bottom: 3px solid var(--primary);
            box-shadow: var(--shadow);
        }
        h1 { margin: 0; font-size: 2rem; text-transform: uppercase; letter-spacing: 2px; }
        .subtitle { color: var(--primary); font-weight: bold; margin-top: 8px; text-transform: uppercase; font-size: 0.9rem; letter-spacing: 1px; }

        nav {
            display: flex;
            justify-content: center;
            background: #181818;
            padding: 15px;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid var(--border);
            backdrop-filter: blur(10px);
        }
        nav a {
            color: var(--text-muted);
            text-decoration: none;
            margin: 0 20px;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.85rem;
            transition: color 0.2s;
        }
        nav a:hover { color: var(--primary); }

        .container { max-width: 1600px; margin: 0 auto; padding: 20px;}

        /* --- Progress Bar --- */
        .progress-container {
            background: var(--bg-card);
            border: 1px solid var(--border);
            padding: 20px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .progress-label { font-size: 1.2rem; font-weight: bold; }
        .reset-btn {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-muted);
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            text-transform: uppercase;
            font-size: 0.75rem;
            transition: all 0.2s;
        }
        .reset-btn:hover { border-color: var(--primary); color: var(--primary); }

        /* --- Calendar Grid --- */
        .week-header {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            text-align: center;
            font-weight: bold;
            color: var(--text-muted);
            text-transform: uppercase;
            margin-bottom: 10px;
        }
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }
        .day-card {
            background-color: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 6px;
            min-height: 160px;
            padding: 12px;
            display: flex;
            flex-direction: column;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
            position: relative;
        }
        .day-card:hover { transform: translateY(-3px); background-color: #252525; border-color: #555; }
        
        .day-card.completed { border-color: var(--success); background: rgba(0, 230, 118, 0.05); }
        .day-card.completed::after {
            content: "✔";
            position: absolute;
            top: 8px;
            right: 10px;
            color: var(--success);
            font-size: 1.2rem;
        }

        .day-num { font-size: 0.75rem; font-weight: bold; color: var(--text-muted); margin-bottom: 6px; }
        .workout-title { color: var(--primary); font-weight: 800; font-size: 0.95rem; text-transform: uppercase; margin-bottom: 8px; line-height: 1.2; }
        .preview-text { font-size: 0.75rem; color: #bbb; margin: 0; padding-left: 0; list-style: none; flex-grow: 1; }
        .preview-text li { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-bottom: 2px; }
        
        .cardio-badge {
            margin-top: 10px;
            padding-top: 8px;
            border-top: 1px solid #333;
            color: var(--accent);
            font-size: 0.7rem;
            font-weight: bold;
            text-transform: uppercase;
        }

        /* --- Rest Days --- */
        .day-card.rest { background: #141414; border-style: dashed; }
        .day-card.rest .workout-title { color: #555; }

        /* --- Info Sections --- */
        h2 { color: var(--primary); border-left: 4px solid var(--primary); padding-left: 15px; margin: 0px 0 25px; text-transform: uppercase; letter-spacing: 1px; }
        
        .info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 25px; }
        .info-card { background: var(--bg-card); padding: 25px; border-radius: 8px; border-top: 4px solid var(--primary); }
        .info-card h3 { margin-top: 0; color: var(--text-main); text-transform: uppercase; font-size: 1.1rem; }
        
        .meal-row { display: flex; justify-content: space-between; border-bottom: 1px solid #333; padding: 10px 0; }
        .meal-row b { color: var(--primary); font-weight: 600; }
        
        /* --- Modal --- */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 2000;
            backdrop-filter: blur(4px);
            justify-content: center;
            align-items: center;
        }
        .modal {
            background: var(--bg-modal);
            width: 90%; max-width: 600px;
            max-height: 90vh;
            border-radius: 12px;
            border: 1px solid var(--border);
            display: flex; flex-direction: column;
            box-shadow: 0 20px 50px rgba(0,0,0,0.7);
            animation: slideIn 0.2s ease-out;
        }
        @keyframes slideIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        .modal-header { padding: 20px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
        .modal-title { margin: 0; color: var(--primary); font-size: 1.5rem; text-transform: uppercase; }
        .close-btn { background: none; border: none; color: #fff; font-size: 2rem; cursor: pointer; line-height: 1; }
        
        .modal-body { padding: 25px; overflow-y: auto; }
        .section-title { color: var(--accent); font-weight: bold; text-transform: uppercase; font-size: 0.85rem; margin-bottom: 10px; letter-spacing: 1px; }
        .modal-list { padding-left: 20px; margin-top: 0; color: #ddd; }
        .modal-list li { margin-bottom: 6px; }
        
        .tip-box { background: rgba(255, 215, 0, 0.1); padding: 15px; border-left: 3px solid var(--accent); margin-top: 20px; border-radius: 4px; }
        .tip-box p { margin: 0; font-size: 0.9rem; color: #fff; font-style: italic; }

        .video-container { margin-top: 20px; }
        .video-container video { width: 100%; border-radius: 4px; }

        .modal-footer { padding: 20px; border-top: 1px solid var(--border); display: flex; justify-content: flex-end; gap: 15px; }
        .btn { padding: 12px 24px; border-radius: 6px; font-weight: bold; border: none; cursor: pointer; text-transform: uppercase; font-size: 0.9rem; }
        .btn-cancel { background: #333; color: #fff; }
        .btn-action { background: var(--success); color: #000; }
        .btn-action:hover { background: #00c853; }
        .btn-undo { background: var(--primary); color: #fff; }

        @media (max-width: 1000px) {
            .week-header { display: none; }
            .calendar { grid-template-columns: 1fr; }
            .day-card { min-height: auto; }
            .preview-text { display: none; }
        }
    </style>
</head>
<body>

<header>
    <h1>12-Week Transformation</h1>
    <div class="subtitle">Trainer & Tracker</div>
</header>

<nav>
    <a href="#schedule">Schedule</a>
    <a href="#diet">Nutrition</a>
    <a href="#shopping">Shopping List</a>
    <a href="#tips">Trainer Tips</a>
</nav>

<div class="container">
    
    <div class="progress-container">
        <div class="progress-label">YOUR PROGRESS: <span id="progress-text" style="color:var(--primary)">0</span> / 84 DAYS</div>
        <button class="reset-btn" onclick="resetAll()">Reset History</button>
    </div>

    <h2 id="schedule">Workout Calendar (Start: Sunday)</h2>
    <div class="week-header">
        <div>Sunday</div><div>Monday</div><div>Tuesday</div><div>Wednesday</div><div>Thursday</div><div>Friday</div><div>Saturday</div>
    </div>
    <div id="calendar-grid" class="calendar"></div>
<br>
    <div class="info-grid">
        <div id="diet" class="info-card">
            <h3>Daily Meal Plan</h3>
            <div class="meal-row"><b>Meal 1</b> <span>Egg Whites, Oats, Coffee</span></div>
            <div class="meal-row"><b>Meal 2</b> <span>Lean Steak, Brown Rice</span></div>
            <div class="meal-row"><b>Meal 3</b> <span>Chicken, Sweet Potato, Broccoli</span></div>
            <div class="meal-row"><b>Meal 4</b> <span>Fish, Brown Rice, Broccoli</span></div>
            <div class="meal-row"><b>Meal 5</b> <span>Chicken, Sweet Potato, Broccoli</span></div>
            <div class="meal-row"><b>Pre-Workout</b> <span>Tilapia, Brown Rice, Coffee</span></div>
            <div class="meal-row"><b>Post-Workout</b> <span>Shake (Vitargo, Glutamine, Creatine)</span></div>
            <div class="meal-row"><b>Dinner</b> <span>Lean Steak, Broccoli</span></div>
            <div class="meal-row"><b>Bedtime</b> <span>Casein / Meal Replacement</span></div>
        </div>

        <div id="shopping" class="info-card">
            <h3>Weekly Shopping List</h3>
            <ul style="color: #ccc; padding-left: 20px;">
                <li><strong>Proteins:</strong> Eye of Round Steak, Tilapia, Chicken Breast, Turkey Breast, Egg Whites.</li>
                <li><strong>Carbs:</strong> Sweet Potatoes, Yams, Brown Rice, Oats.</li>
                <li><strong>Veg:</strong> Broccoli (Fresh or Frozen).</li>
                <li><strong>Hydration:</strong> 2-3 Gallon Jugs of Water.</li>
                <li><strong>Misc:</strong> Coffee, Truvia, Cooking Spray, Tupperware.</li>
            </ul>
        </div>

        <div id="tips" class="info-card">
            <h3>Trainer Rules</h3>
            <ul style="color: #ccc; padding-left: 20px;">
                <li><strong>Hydration:</strong> Drink 1-2 gallons daily to prevent performance drops.</li>
                <li><strong>Consistency:</strong> Eat every 2-3 hours. No cheat meals allowed.</li>
                <li><strong>Portions:</strong> 1 fist-sized protein + 1 fist-sized carb per meal.</li>
                <li><strong>Flavor:</strong> Use Ginger, Cayenne, and Salt to keep food palatable.</li>
                <li><strong>Cardio:</strong> Must be done twice daily (Morning/Evening) as scheduled.</li>
            </ul>
        </div>
    </div>
</div>

<div id="modal" class="modal-overlay" onclick="closeModal(event)">
    <div class="modal">
        <div class="modal-header">
            <h3 id="m-title" class="modal-title">Legs</h3>
            <button class="close-btn" onclick="closeModal()">×</button>
        </div>
        <div class="modal-body">
            <div class="section-title">Cardio Requirement</div>
            <div id="m-cardio" style="color: #ffeb3b; margin-bottom: 20px; font-weight: bold;"></div>

            <div class="section-title">Workout Routine</div>
            <ul id="m-exercises" class="modal-list"></ul>

            <div class="tip-box">
                <div class="section-title" style="color: var(--accent); margin:0;">Daily Pro Tip:</div>
                <p id="m-tip">Drink water.</p>
            </div>

            <div class="video-container">
                <video id="m-video" controls playsinline>
                    <!-- Source will be set dynamically -->
                </video>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-cancel" onclick="closeModal()">Close</button>
            <button id="m-toggle-btn" class="btn btn-action" onclick="toggleComplete()">Mark Complete</button>
        </div>
    </div>
</div>

<script>
    // --- Data Definitions ---
    const exercises = {
        "Legs": ["Leg Press (4-5 sets)", "Hamstring Curls (3 sets)", "Lying Leg Curls (3 sets)", "Leg Extensions (3 sets)", "Hack Squats (3 sets)"],
        "Chest/Triceps": ["Flat DB Press (3 sets)", "Incline Flyes (3 sets)", "DB Pullovers (3 sets)", "Rope Extensions (3 sets)", "Overhead Extensions (3 sets)"],
        "Back/Biceps": ["Reverse Grip Pulldowns (3 sets)", "Barbell Rows (3 sets)", "Hyperextensions (3 sets)", "Concentration Curls (3 sets)", "Cable Curls (3 sets)"],
        "Shoulders/Abs": ["Military Press (3 sets)", "Side Raises (3 sets)", "Upright Rows (3 sets)", "Rear Delt Flyes (3 sets)", "Weighted Situps (3 sets)"],
        "Shoulders": ["Smith Machine Press", "Machine Side Raises", "DB Shrugs", "Rear Delt Flyes"],
        "Calves/Abs": ["Standing Calf Raise (4 sets)", "Donkey Calf Raise (4 sets)", "Hanging Leg Raises (3 sets)"],
        "Chest": ["Incline DB Press (3 sets)", "Flat Bench Press (3 sets)", "Cable Crossovers (3 sets)", "Pec Deck (3 sets)"],
        "Bis/Tris": ["DTP EZ-Bar Curls (50-10 reps)", "DTP Tricep Pushdowns (50-10 reps)", "Hammer Curls", "Skull Crushers"],
        "Rest": ["Active Recovery (Walk/Stretch)", "Hydrate (1-2 Gallons)", "Meal Prep"]
    };

    // Internet Sourced Tips
    const tips = {
        "Legs": "Mind-Muscle Connection: Don't just move the weight. Feel the quad contract at the top of every rep. If you can walk normally after this, you didn't go hard enough.",
        "Chest/Triceps": "Form Tip: On flyes, keep a slight bend in elbows to protect joints. Squeeze the chest hard at the peak of the movement.",
        "Back/Biceps": "Visualization: Imagine your hands are hooks. Pull with your elbows, not your biceps, to fully engage the lats.",
        "Shoulders": "Intensity: Shoulders respond to volume. Keep rest periods short (60s) to keep blood in the muscle.",
        "Rest": "Active Recovery: Do NOT sit on the couch all day. Perform your cardio to flush lactic acid and aid recovery.",
        "DTP": "DTP Rules: 50-40-30-20-10 reps. Rest 45s for high reps, up to 120s for low reps. This targets ALL muscle fiber types."
    };

    const schedule = [];
    
    // --- Build 84-Day Schedule ---
    for(let i=1; i<=84; i++) {
        let type = "", isRest = false;

        // Explicit Anchor Days (User Corrections)
        if(i===1 || i===7 || i===14 || i===28) type = "Legs";
        else if(i===12) type = "Calves/Abs";
        else if(i===25) type = "Chest";
        else if(i===83) type = "Bis/Tris";
        else if(i===84) type = "Legs";
        // Verified Rest Days (from PDF gaps)
        else if([3,6,9,11,13,16,19,22,26,30,33,37,40,44,48,51,55,59,62,66,70,73,77,81,82].includes(i)) {
            type = "Rest"; isRest = true;
        }
        // General Rotation Fill
        else {
            const rot = ["Chest/Triceps", "Back/Biceps", "Shoulders/Abs", "Legs"];
            // Simple mapping for non-anchored days to maintain flow
            if(!type) type = rot[i % 4]; 
        }

        // Phase Logic
        let title = type;
        let tip = tips[type.split('/')[0]] || tips["Rest"];
        if(i >= 43 && i <= 63 && !isRest) {
            title = "DTP: " + type;
            tip = tips["DTP"]; // Override with DTP specific advice
        }

        // Cardio Logic
        let cardio = "20 Min Morning + 20 Min Evening";
        if(i > 28) cardio = "25 Min Morning + 25 Min Evening";
        if(i > 56) cardio = "30 Min Morning + 30 Min Evening";

        schedule.push({
            day: i,
            title: title,
            exKey: type,
            isRest: isRest,
            cardio: cardio,
            tip: tip
        });
    }

    // --- State & DOM ---
    let completed = JSON.parse(localStorage.getItem('gethin_progress')) || [];
    let currentDay = null;
    const grid = document.getElementById('calendar-grid');
    const modal = document.getElementById('modal');

    function render() {
        grid.innerHTML = "";
        schedule.forEach(d => {
            const isDone = completed.includes(d.day);
            const card = document.createElement('div');
            card.className = `day-card ${d.isRest ? 'rest' : ''} ${isDone ? 'completed' : ''}`;
            card.onclick = () => openModal(d.day);

            // Preview List
            let exList = (exercises[d.exKey] || ["See details"]).slice(0, 3);
            let previewHTML = d.isRest ? "<li>Active Recovery</li>" : exList.map(e => `<li>${e}</li>`).join('');

            card.innerHTML = `
                <div class="day-num">DAY ${d.day}</div>
                <div class="workout-title">${d.title}</div>
                <ul class="preview-text">${previewHTML}</ul>
                <div class="cardio-badge">${d.isRest ? 'Cardio' : 'Cardio'}</div>
            `;
            grid.appendChild(card);
        });
        document.getElementById('progress-text').innerText = completed.length;
    }

    function openModal(day) {
        currentDay = day;
        const data = schedule[day-1];
        const isDone = completed.includes(day);

        document.getElementById('m-title').innerText = `Day ${day}: ${data.title}`;
        document.getElementById('m-cardio').innerText = data.cardio;
        document.getElementById('m-tip').innerText = data.tip;
        
        const list = document.getElementById('m-exercises');
        list.innerHTML = "";
        let exs = exercises[data.exKey] || ["Details inside PDF"];
        exs.forEach(e => {
            list.innerHTML += `<li>${e}</li>`;
        });

        // Set video source
        const video = document.getElementById('m-video');
        video.src = `v/${day}.m`;
        video.load();

        const btn = document.getElementById('m-toggle-btn');
        if(isDone) {
            btn.innerText = "Mark Incomplete";
            btn.className = "btn btn-undo";
        } else {
            btn.innerText = "Mark Complete";
            btn.className = "btn btn-action";
        }

        modal.style.display = 'flex';
    }

    function closeModal(e) {
        if(e && e.target !== modal && !e.target.classList.contains('close-btn') && !e.target.classList.contains('btn-cancel')) return;
        modal.style.display = 'none';
        // Pause video on close
        const video = document.getElementById('m-video');
        video.pause();
    }

    function toggleComplete() {
        if(completed.includes(currentDay)) {
            completed = completed.filter(d => d !== currentDay);
        } else {
            completed.push(currentDay);
        }
        localStorage.setItem('gethin_progress', JSON.stringify(completed));
        render();
        openModal(currentDay); // Refresh button
    }

    function resetAll() {
        if(confirm("Reset all progress? This cannot be undone.")) {
            localStorage.removeItem('gethin_progress');
            completed = [];
            render();
        }
    }

    // Init
    render();

</script>

</body>
</html>